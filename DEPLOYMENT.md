https://github.com/developerrrdeepak/infraliths# üöÄ Deploying Infralith to Azure

This document outlines the steps to deploy the Infralith platform to **Azure Static Web Apps** or **Azure App Service**.

## Option 1: Azure Static Web Apps (Recommended)

Infralith is pre-configured with a GitHub Actions workflow for Azure Static Web Apps.

### Steps:
1.  **Create a Static Web App in Azure**:
    *   Go to the [Azure Portal](https://portal.azure.com).
    *   Search for "Static Web Apps" and click **Create**.
    *   Select your GitHub repository and the `main` branch.
    *   For **Build Presets**, select **Next.js**.
2.  **Configure GitHub Secrets**:
    *   Azure will automatically add a secret called `AZURE_STATIC_WEB_APPS_API_TOKEN` to your GitHub repository.
    *   You must manually add the following environment variables as GitHub Secrets (Settings > Secrets and variables > Actions):
        *   `NEXT_PUBLIC_FIREBASE_API_KEY`
        *   `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`
        *   `NEXT_PUBLIC_FIREBASE_PROJECT_ID`
        *   `AZURE_OPENAI_ENDPOINT`
        *   `AZURE_OPENAI_KEY`
        *   `AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT`
        *   `AZURE_DOCUMENT_INTELLIGENCE_KEY`
3.  **Deploy**:
    *   Push any change to the `main` branch to trigger the deployment.

## Option 2: Azure App Service (Linux) - RECOMMENDED for Full App

If you are using the URL ending in `.azurewebsites.net`, you are using Azure App Service.

### Steps:
1.  **Configure GitHub Secrets**:
    *   Add the following secrets to your GitHub repository (Settings > Secrets and variables > Actions):
        *   `AZURE_WEBAPP_NAME`: Your app name (e.g., `infralith-epd3e7akbyf0a2ce`).
        *   `AZURE_WEBAPP_PUBLISH_PROFILE`: Download this from the Azure Portal (Overview > Get publish profile).
        *   `NEXT_PUBLIC_FIREBASE_API_KEY`, etc. (All AI keys).
2.  **Deploy**:
    *   Push to `main`. The `Azure App Service CI/CD` workflow will handle the build and deployment.
3.  **Startup Command**:
    *   In Azure Portal > Configuration > General Settings, set the **Startup Command** to: `node server.js`

## üõ°Ô∏è Best Practices
*   **Standalone Mode**: I have enabled `output: 'standalone'` in `next.config.ts`. This is critical for Azure App Service as it pre-packages the application for production.
*   **NextAuth URL**: Ensure `NEXTAUTH_URL` is set to your production URL.

--- 
*Generated by Infralith Intelligence Agent*
